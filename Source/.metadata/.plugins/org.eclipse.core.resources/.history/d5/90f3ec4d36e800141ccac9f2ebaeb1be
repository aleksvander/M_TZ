package ru.adnovotelnov.classes;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import model_JPA.Task;
import model_JPA.User;

import com.google.gson.Gson;

public class ConverterObjToStr<E> {
	
	private Gson gson = new Gson();
	
	public String convertObjToStr(List<E> lobj) {
		/*HashMap<String, String> lstr = new HashMap<String, String>();
		for (E elobj : lobj) {
			//lstr.add(elobj != null ? elobj.toString() : null);
			lstr.put("id", elobj.toString());
			lstr.put("name", elobj.toString());
		}*/
		return gson.toJson(lobj);
	}
	
	public String convertObjToStr3(List<User> lobj) {
		HashMap<Object, Object> lstr = new HashMap<Object, Object>();
		for (User elobj : lobj) {
			//lstr.add(elobj != null ? elobj.toString() : null);
			lstr.put("id", (Integer)elobj.getId());
			lstr.put("name", elobj.getName());
			//lstr.put("user", elobj.getUser());
			//System.out.println(elobj.toString());
		}
		return gson.toJson(lstr);
	}	
	
	public String convertObjToStr2(List<Task> lobj) {
		HashMap<Object, Object> lstr = new HashMap<Object, Object>();
		StringBuilder strColl = new StringBuilder("{\"task\":[");
		int i = 0;
		for (Task elobj : lobj) {
			//lstr.add(elobj != null ? elobj.toString() : null);
			
			if (i > 0)
				strColl.append(",");
				
			lstr.put("id", (Integer)elobj.getId());
			lstr.put("name", elobj.getName());
			lstr.put("lasttime", elobj.getLastTime());
			lstr.put("summtime", elobj.getSummTime());
			//lstr.put("user", elobj.getUser());
			
			System.out.println(elobj.toString());
			strColl.append(gson.toJson(lstr));
			i++;
		}
		strColl.append("]}");
		System.out.println(strColl);
		return strColl.toString();
	}
	
	private void test() {
		E c = obj.getClass(); 
		Field[] publicFields = c.getFields(); 
		for (Field field : publicFields) { 
		    Class fieldType = field.getType(); 
		    System.out.println("Èìÿ: " + field.getName()); 
		    System.out.println("Òèï: " + fieldType.getName()); 
		}
	}

}
