package ru.novotelnovad.view.classes;

import java.util.List;

import javax.naming.InitialContext;

import model_JPA.User;
import ru.adnovotelnov.ejb.UserEJBLocal;

public class Test2json {
	private InitialContext ctx;
	private UserEJBLocal userEJBLocal;
	
	/**
	 * Инициализируем соединение для Меню
	 * @return MenuEJBLocal
	 */
	private UserEJBLocal initializeUserEJBLocal() {
		try {
			ctx = new InitialContext();
			//JNDI
			userEJBLocal = (UserEJBLocal) ctx.lookup("java:global/TZ/Model/userEJB");			
		} catch (Exception e) {
			
		}
		return userEJBLocal;
	}
	
	/**
	 * Метод для возврата инициализированного соединения 
	 * @return MenuEJBLocal
	 */
	private UserEJBLocal getEJBUserLocal() {
		if (userEJBLocal != null) {
			return userEJBLocal;
		} else {
			return initializeUserEJBLocal();
		}
	}
	
	/**
	 * Метод для получения коллекции из сущности меню
	 * @return
	 */
	public List<User> getMenuAll() {
		//Обращаемся к бину через его интерфейс
		try {
			return (getEJBUserLocal().getAllUsers());
		} catch (Exception e) {
			return null;
		} 
	}
}
