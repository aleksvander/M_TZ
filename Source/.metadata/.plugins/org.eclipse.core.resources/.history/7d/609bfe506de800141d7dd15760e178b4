package ru.adnovotelnov.ejb;

import java.util.List;

import javax.ejb.Local;
import javax.ws.rs.CookieParam;
import javax.ws.rs.DefaultValue;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import model_JPA.Task;

/**
 * Ћокальный интерфейс дл€ доступа к ejb компоненту
 * — аннотаци€ми дл€ доступа через RESTEasy
 * @author Ќовотельнов ј.ƒ.
 * @version 1.0
 */
@Local
@Path("tasks")
public interface TaskEJBLocal {
	
	/**
	 * ћетод возврата(поиска) / создани€ и возврата задачи
	 * @param userId - ид текущего пользовател€ "сессии"
	 * @param currentTask - название текущей задачи
	 * @return string - формата JSON
	 */
	@GET
	@Path("getOrCreateTask")
	@Produces(MediaType.APPLICATION_JSON)
	public String getOrCreateTask(@CookieParam("userid") Integer userId, @CookieParam("currentTask") String currentTask);

	/**
	 * ћетод возвращает все задачи пользовател€
	 * @param userId - ид текущего пользовател€ "сессии"
	 * @return string - формата JSON
	 */
	@GET
	@Path("getAllTaskCurrentUser")
	@Produces(MediaType.APPLICATION_JSON)
	public String getAllTask(@CookieParam("userid") Integer userId);
	
	/**
	 * ћетод проверки "принадлежности" текущей задачи к пользователю
	 * @param userId - ид пользовател€
	 * @param currentTask - название задачи
	 * @return логическое значение
	 */
	@GET
	@Path("checkTaskForUser")
	@Produces(MediaType.APPLICATION_JSON)
	public boolean checkTaskForUser(@CookieParam("userid") Integer userId,
			@CookieParam("currentTask") String currentTask);

	/**
	 * ћетод проверки на схожесть в именах
	 * @param currentTask - название текущей задачи
	 * @return логическое значение
	 */
	@GET
	@Path("checkExistTask")
	@Produces(MediaType.APPLICATION_JSON)
	public boolean checkExistTask(@CookieParam("currentTask") String currentTask);
	
	/**
	 * 
	 * @param userId
	 * @param taskid
	 * @param timer
	 * @return
	 */
	@GET
	@Path("setTaskTime/{currentTime}")
	@Produces(MediaType.APPLICATION_JSON)
	public boolean setTaskTime(@CookieParam("userid") Integer userId,
			@CookieParam("taskid") Integer taskid, @PathParam("currentTime") Integer timer);
	
	/**
	 * 
	 * @param userId
	 * @param currentTask
	 * @return
	 */
	@GET
	@Path("getTimeTaskForUser")
	@Produces(MediaType.APPLICATION_JSON)
	public Integer getTimeForCurrentTaskAndHerUsers(@CookieParam("userid") Integer userId,
			@CookieParam("currentTask") String currentTask);
}
