package ru.adnovotelnov.ejb.dao;

import java.util.List;

import javax.ejb.Local;
import javax.ejb.Stateful;
import javax.ejb.Stateless;
import javax.ejb.TransactionAttribute;
import javax.ejb.TransactionAttributeType;
import javax.persistence.EntityManager;

import com.google.gson.Gson;

import model_JPA.User;

/**
 * Session Bean implementation class UserDaoEJB
 */
@Stateless(name = "userDaoEJB", mappedName = "ejb/userDaoEJB")
@Local
@TransactionAttribute(TransactionAttributeType.REQUIRED)
public class UserDaoEJB extends JPADaoEJB<User> {

	@Override
	public List<User> findAllEntities() {
		return em.createNamedQuery("User.findAll").getResultList();
	}

	public List<User> findByName(String custName) {
		//System.out.println("!!!" + em.createNamedQuery("User.findByName").setParameter("custName", custName).getResultList());
		System.out.println("!!!");
		Gson gson = new Gson();
		Object lust = em.createNamedQuery("User.findByName").setParameter("custName", custName).getSingleResult();
		User l = (User) lust;
		l.getTasks().size();
		
		gson.toJson(lust);
		System.out.println("!!!???");
		System.out.println(l);
		//for(User us : lust)
			//System.out.println(us.getTasks());
		return null;//fd; //em.createNamedQuery("User.findByName").setParameter("custName", custName).getResultList(); 
	}
	
}
